{% extends 'core/base.html' %}
    {% block content %}
 
<title>
    ایجاد فروشگاه
</title>

<div class="min-h-screen bg-gradient-to-br from-[#0b1421] via-[#062441] to-[#041b2d] py-8">
    <div class="max-w-7xl mx-auto px-4">
        
        <!-- هدر صفحه -->
        <div class="text-center mb-12">
            <div class="w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-3xl flex items-center justify-center shadow-2xl shadow-[#0bffff66]">
                <i class="bi bi-plus-lg text-4xl text-[#062441]"></i>
            </div>
            <h1 class="text-5xl md:text-6xl font-black bg-gradient-to-r from-[#0bffff] via-[#0bffffee] to-[#0bffffcc] bg-clip-text text-transparent mb-6">
                ایجاد فروشگاه جدید
            </h1>
            <div class="flex items-center justify-center gap-8 text-[#0bffffaa] text-lg">
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-[#0bffff] rounded-full animate-pulse"></div>
                    <span>پر کردن اطلاعات</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-[#0bffff33] rounded-full"></div>
                    <span>آپلود رسانه</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-[#0bffff33] rounded-full"></div>
                    <span>تنظیمات پیشرفته</span>
                </div>
            </div>
        </div>

        <!-- فرم افقی پیچیده -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-3xl border border-[#0bffff33] shadow-2xl shadow-[#0bffff11] backdrop-blur-sm overflow-hidden">
            
            <!-- ناوبری افقی -->
            <div class="flex border-b border-[#0bffff33]">
                <div class="flex-1 md:p-6 p-4 border-l border-[#0bffff33] bg-gradient-to-r from-[#0bffff11] to-transparent">
                    <div class="flex items-center gap-4">
                        <div class="md:w-12 md:h-12 w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-2xl flex items-center justify-center">
                            <i class="bi bi-info-circle md:text-xl text-sm text-[#062441]"></i>
                        </div>
                        <div>
                            <h3 class="md:text-xl text-sm font-black text-white">اطلاعات پایه</h3>
                            <p class="text-[#0bffffaa] text-sm">نام و توضیحات فروشگاه</p>
                        </div>
                    </div>
                </div>
                <div class="flex-1 md:p-6 p-4 border-l border-[#0bffff33]">
                    <div class="flex items-center gap-4">
                        <div class="md:w-12 md:h-12 w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-2xl flex items-center justify-center">
                            <i class="bi bi-images md:text-xl text-sm text-[#0bffff]"></i>
                        </div>
                        <div>
                            <h3 class="md:text-xl text-sm font-black text-white">رسانه و برندینگ</h3>
                            <p class="text-[#0bffffaa] text-sm">لوگو و بنر فروشگاه</p>
                        </div>
                    </div>
                </div>
                <div class="flex-1 md:p-6 p-4 border-l border-[#0bffff33]">
                    <div class="flex items-center gap-4">
                        <div class="md:w-12 md:h-12 w-6 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-2xl flex items-center justify-center">
                            <i class="bi bi-gear md:text-xl text-sm text-[#0bffff]"></i>
                        </div>
                        <div>
                            <h3 class="md:text-xl text-sm font-black text-white">تنظیمات</h3>
                            <p class="text-[#0bffffaa] text-sm">وضعیت و پیکربندی</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- بدنه فرم افقی -->
            <form method="POST" enctype="multipart/form-data" class="flex flex-col lg:flex-row">
                {% csrf_token %}
                
                <!-- ستون اول - اطلاعات پایه -->
                <div class="flex-1 p-8 border-l border-[#0bffff33]">
                    <div class="space-y-8">
                        
                        <!-- نام فروشگاه -->
                        <div class="group">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-lg flex items-center justify-center">
                                    <i class="bi bi-building text-sm text-[#0bffff]"></i>
                                </div>
                                <label class="text-[#0bffffdd] font-bold text-lg">نام فروشگاه</label>
                            </div>
                            <input type="text" name="name_shop" required maxlength="26"
                                   class="w-full bg-[#0b1421aa] border-2 border-[#0bffff44] rounded-2xl px-6 py-4 text-white placeholder-[#0bffff66] font-medium transition-all duration-300 focus:border-[#0bffff] focus:bg-[#0b1421] focus:shadow-[0_0_20px_rgba(11,255,255,0.3)] outline-none"
                                   placeholder="مثال: دیجی‌شاپ">
                            <div class="flex justify-between items-center mt-3">
                                <span class="text-[#0bffff66] text-sm">نام منحصربفرد برای برند شما</span>
                                <span id="name-counter" class="text-[#0bffff] text-sm font-bold">۰/۲۶</span>
                            </div>
                        </div>

                        <!-- توضیحات -->
                        <div class="group">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-lg flex items-center justify-center">
                                    <i class="bi bi-text-paragraph text-sm text-[#0bffff]"></i>
                                </div>
                                <label class="text-[#0bffffdd] font-bold text-lg">توضیحات فروشگاه</label>
                            </div>
                            <textarea name="description" required maxlength="120" rows="4"
                                      class="w-full bg-[#0b1421aa] border-2 border-[#0bffff44] rounded-2xl px-6 py-4 text-white placeholder-[#0bffff66] font-medium resize-none transition-all duration-300 focus:border-[#0bffff] focus:bg-[#0b1421] focus:shadow-[0_0_20px_rgba(11,255,255,0.3)] outline-none"
                                      placeholder="فروشگاه خود را در چند خط معرفی کنید..."></textarea>
                            <div class="flex justify-between items-center mt-3">
                                <span class="text-[#0bffff66] text-sm">این متن در صفحه اصلی نمایش داده می‌شود</span>
                                <span id="desc-counter" class="text-[#0bffff] text-sm font-bold">۰/۱۲۰</span>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- ستون دوم - رسانه -->
                <div class="flex-1 p-8 border-l border-[#0bffff33]">
                    <div class="space-y-8">
                        
                        <!-- آپلود لوگو -->
                        <div class="group">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-lg flex items-center justify-center">
                                    <i class="bi bi-card-image text-sm text-[#0bffff]"></i>
                                </div>
                                <label class="text-[#0bffffdd] font-bold text-lg">لوگو فروشگاه</label>
                            </div>
                            <div class="border-2 border-dashed border-[#0bffff44] rounded-2xl p-6 text-center hover:border-[#0bffff] transition-colors duration-300 cursor-pointer bg-[#0b142133]">
                                <input type="file" name="logo" accept="image/*" required class="hidden" id="logo-upload">
                                <label for="logo-upload" class="cursor-pointer block">
                                    <div class="text-[#0bffffaa] mb-3">
                                        <i class="bi bi-cloud-arrow-up text-3xl"></i>
                                    </div>
                                    <span class="text-[#0bffff] font-bold">آپلود لوگو</span>
                                    <span class="text-[#0bffffaa] text-xs block mt-1">PNG, JPG • حداکثر ۲MB</span>
                                </label>
                            </div>
                            <div class="mt-3 text-[#0bffff66] text-sm">
                                لوگو در  و پروفایل نمایش داده می‌شود
                            </div>
                        </div>

                        <!-- آپلود بنر -->
                        <div class="group">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-lg flex items-center justify-center">
                                    <i class="bi bi-image-alt text-sm text-[#0bffff]"></i>
                                </div>
                                <label class="text-[#0bffffdd] font-bold text-lg">بنر فروشگاه</label>
                            </div>
                            <div class="border-2 border-dashed border-[#0bffff44] rounded-2xl p-6 text-center hover:border-[#0bffff] transition-colors duration-300 cursor-pointer bg-[#0b142133]">
                                <input type="file" name="banner" accept="image/*" class="hidden" id="banner-upload">
                                <label for="banner-upload" class="cursor-pointer block">
                                    <div class="text-[#0bffffaa] mb-3">
                                        <i class="bi bi-images text-3xl"></i>
                                    </div>
                                    <span class="text-[#0bffff] font-bold">آپلود بنر</span>
                                    <span class="text-[#0bffffaa] text-xs block mt-1">PNG, JPG • حداکثر ۵MB</span>
                                </label>
                            </div>
                            <div class="mt-3 text-[#0bffff66] text-sm">
                                بنر در صفحه اصلی فروشگاه نمایش داده می‌شود
                            </div>
                        </div>

                    </div>
                </div>

                <!-- ستون سوم - تنظیمات -->
                <div class="flex-1 p-8 border-l border-[#0bffff33]">
                    <div class="space-y-8">
                        
                        <!-- وضعیت فعال -->
                        <style>
                        input[type="radio"] {
                            display: none; /* مخفی کردن رادیوباتن اصلی */
                        }

                        /* استایل label پیشفرض */
                        .label {
                            display: flex;
                            align-items: center;
                            gap: 1rem;
                            padding: 1rem;
                            border-radius: 0.75rem;
                            background-color: #0b142133;
                            border: 2px solid #0bffff44;
                            cursor: pointer;
                            transition: border-color 0.3s;
                        }

                        /* وقتی موس روی label است */
                        .label:hover {
                            border-color: #0bffff;
                        }

                        /* وقتی رادیو انتخاب شده، label مربوطه */
                        input[type="radio"]:checked + label {
                            border-color: #0bffff;
                            background-color: #0b1421cc;
                        }

                        /* دایره بزرگ داخل label */
                        .label div.circle-outer {
                            width: 24px;
                            height: 24px;
                            border: 2px solid #0bffff;
                            border-radius: 9999px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        }

                        /* دایره کوچیک وسط که فقط وقتی انتخاب شد ظاهر میشه */
                        .label div.circle-inner {
                            width: 12px;
                            height: 12px;
                            background-color: #0bffff;
                            border-radius: 9999px;
                            opacity: 0;
                            transition: opacity 0.3s;
                        }

                        /* وقتی رادیو انتخاب شده، دایره کوچیک نشون داده میشه */
                        input[type="radio"]:checked + label div.circle-outer div.circle-inner {
                            opacity: 1;
                        }

                        /* متن داخل label */
                        .label div.text {
                            flex: 1;
                            color: white;
                        }

                        .label div.text p {
                            color: #0bffffaa;
                            font-size: 0.875rem;
                            margin-top: 0.25rem;
                        }

                        /* انیمیشن pulsing برای گزینه فعال */
                        .label.active-pulse div.pulse-dot {
                            width: 12px;
                            height: 12px;
                            background-color: #0bffff;
                            border-radius: 9999px;
                            animation: pulse 2s infinite;
                        }

                        @keyframes pulse {
                            0%, 100% {
                            opacity: 1;
                            transform: scale(1);
                            }
                            50% {
                            opacity: 0.5;
                            transform: scale(1.3);
                            }
                        }
                        </style>

                        <div class="group">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-lg flex items-center justify-center">
                            <i class="bi bi-power text-sm text-[#0bffff]"></i>
                            </div>
                            <label class="text-[#0bffffdd] font-bold text-lg">وضعیت فروشگاه</label>
                        </div>
                        
                        <div class="space-y-4">
                            <!-- گزینه فعال -->
                            <input type="radio" name="active" value="True" id="active-true" checked>
                            <label for="active-true" class="active-pulse label"> 
                            <div class="circle-outer">
                                <div class="circle-inner"></div>
                            </div>
                            <div class="text">
                                <span class="font-medium">فعال</span>
                                <p>فروشگاه بلافاصله قابل دسترسی است</p>
                            </div>
                            <div class="pulse-dot"></div>
                            </label>

                            <!-- گزینه غیرفعال -->
                            <input type="radio" name="active" value="False" id="active-false">
                            <label for="active-false" class="label">
                            <div class="circle-outer">
                                <div class="circle-inner"></div>
                            </div>
                            <div class="text">
                                <span class="font-medium">غیرفعال</span>
                                <p>فروشگاه بعداً فعال خواهد شد</p>
                            </div>
                            </label>
                        </div>
                        </div>

                        <!-- خلاصه اطلاعات -->
                        <div class="group">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff33] to-[#0bffff55] rounded-lg flex items-center justify-center">
                                    <i class="bi bi-list-check text-sm text-[#0bffff]"></i>
                                </div>
                                <label class="text-[#0bffffdd] font-bold text-lg">خلاصه اطلاعات</label>
                            </div>
                            <div class="bg-gradient-to-br from-[#0b142133] to-[#06244133] rounded-2xl p-4 border border-[#0bffff33] space-y-3">
                                <div class="flex justify-between items-center">
                                    <span class="text-[#0bffffaa] text-sm">نام فروشگاه:</span>
                                    <span id="summary-name" class="text-white text-sm font-medium">---</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-[#0bffffaa] text-sm">دسته‌بندی:</span>
                                    <span id="summary-category" class="text-white text-sm font-medium">الکترونیک</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-[#0bffffaa] text-sm">وضعیت:</span>
                                    <span class="text-[#0bffff] text-sm font-medium">فعال</span>
                                </div>
                            </div>
                        </div>

                        <!-- دکمه ایجاد -->
                        <button type="submit" 
                                class="w-full py-4 bg-gradient-to-r from-[#0bffff] via-[#0bffffee] to-[#0bffff] text-[#062441] font-black text-lg rounded-2xl shadow-2xl shadow-[#0bffff66] hover:shadow-[0_0_40px_rgba(11,255,255,0.8)] hover:scale-[1.02] transition-all duration-500 flex items-center justify-center gap-3">
                            <i class="bi bi-lightning-fill"></i>
                            ایجاد فروشگاه
                            <i class="bi bi-arrow-left"></i>
                        </button>

                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // مدیریت شمارنده‌ها
    const nameInput = document.querySelector('input[name="name_shop"]');
    const nameCounter = document.getElementById('name-counter');
    const descTextarea = document.querySelector('textarea[name="description"]');
    const descCounter = document.getElementById('desc-counter');
    
    nameInput.addEventListener('input', updatePreview);
    descTextarea.addEventListener('input', updatePreview);
    
    function updatePreview() {
        const nameCount = nameInput.value.length;
        const descCount = descTextarea.value.length;
        
        nameCounter.textContent = `${nameCount}/26`;
        descCounter.textContent = `${descCount}/120`;
        
        document.getElementById('preview-name').textContent = nameInput.value || 'نام فروشگاه';
        document.getElementById('preview-desc').textContent = descTextarea.value || 'توضیحات فروشگاه اینجا نمایش داده می‌شود';
        document.getElementById('summary-name').textContent = nameInput.value || '---';
    }
    
    // مدیریت radio buttons
    document.querySelectorAll('input[type="radio"]').forEach(radio => {
        radio.addEventListener('change', function() {
            if (this.name === 'category') {
                document.getElementById('summary-category').textContent = 
                    this.parentElement.querySelector('span').textContent;
            }
            
            // آپدیت استایل radio buttons
            document.querySelectorAll(`input[name="${this.name}"]`).forEach(r => {
                const label = r.closest('label');
                const dot = label.querySelector('.bg-\\[#0bffff\\]');
                if (r.checked) {
                    label.style.borderColor = '#0bffff';
                    label.style.background = '#0bffff22';
                    if (dot) dot.classList.remove('hidden');
                } else {
                    label.style.borderColor = '#0bffff44';
                    label.style.background = '#0b142133';
                    if (dot) dot.classList.add('hidden');
                }
            });
        });
    });
    
    // مدیریت checkbox ها
    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const label = this.closest('label');
            const icon = label.querySelector('.bi-check');
            
            if (this.checked) {
                label.style.borderColor = '#0bffff';
                label.style.background = '#0bffff22';
                icon.classList.remove('hidden');
            } else {
                label.style.borderColor = '#0bffff33';
                label.style.background = '#0b142133';
                icon.classList.add('hidden');
            }
        });
        
        // فعال کردن checkbox های پیش‌فرض
        if (checkbox.checked) {
            checkbox.dispatchEvent(new Event('change'));
        }
    });
    
    // فعال کردن radio button پیش‌فرض
    document.querySelector('input[type="radio"]').dispatchEvent(new Event('change'));
    updatePreview();
});
</script>
{% endblock %}