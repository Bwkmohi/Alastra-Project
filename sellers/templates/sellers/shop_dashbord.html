{% extends 'sellers/base_admin.html' %}

<title>
    داشبورد فروشگاه
</title>

{% block seller_con %}
<section class="min-h-screen bg-gradient-to-br from-[#0b1421] via-[#062441] to-[#041b2d] text-white p-6">
    <main class="container mx-auto px-4 py-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- اقدامات سریع -->
            <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] border border-[#0bffff33] rounded-2xl p-6 shadow-lg backdrop-blur-sm group hover:border-[#0bffff] hover:shadow-[0_0_30px_rgba(11,255,255,0.2)] transition-all duration-500">
                <h2 class="text-xl font-black text-white mb-6 flex items-center gap-2">
                    <span class="w-2 h-6 bg-gradient-to-b from-[#0bffff] to-[#0bffffee] rounded-full"></span>
                    اقدامات سریع
                </h2>
                <div class="grid grid-cols-2 gap-4">
                    <a href="{% url 'pro:product_Add' shop_id %}" class="bg-[#0b1421aa] hover:bg-[#0bffff33] border border-[#0bffff33] hover:border-[#0bffff] rounded-xl p-4 transition-all duration-300 group">
                        <div class="flex flex-col items-center text-center">
                            <i class="bi bi-plus-circle text-2xl text-[#0bffff] group-hover:text-[#062441] mb-2 transition-colors duration-300"></i>
                            <span class="text-sm font-medium text-[#0bffff] group-hover:text-[#062441] transition-colors duration-300">محصول جدید</span>
                        </div>
                    </a>
                    <a href="{% url 's_ques:list_questions' shop_id %}" class="bg-[#0b1421aa] hover:bg-[#0bffff33] border border-[#0bffff33] hover:border-[#0bffff] rounded-xl p-4 transition-all duration-300 group">
                        <div class="flex flex-col items-center text-center">
                            <i class="bi bi-chat-right-text text-2xl text-[#0bffff] group-hover:text-[#062441] mb-2 transition-colors duration-300"></i>
                            <span class="text-sm font-medium text-[#0bffff] group-hover:text-[#062441] transition-colors duration-300">پرسش پاسخ کاربران</span>
                        </div>
                    </a>
                    <a href="{% url 'ord:orders_list' shop_id %}" class="bg-[#0b1421aa] hover:bg-[#0bffff33] border border-[#0bffff33] hover:border-[#0bffff] rounded-xl p-4 transition-all duration-300 group">
                        <div class="flex flex-col items-center text-center">
                            <i class="bi bi-truck text-2xl text-[#0bffff] group-hover:text-[#062441] mb-2 transition-colors duration-300"></i>
                            <span class="text-sm font-medium text-[#0bffff] group-hover:text-[#062441] transition-colors duration-300">مدیریت سفارشات</span>
                        </div>
                    </a>
                    <a href="{% url 'ord:export_orders_for_seller' shop_id %}" class="bg-[#0b1421aa] hover:bg-[#0bffff33] border border-[#0bffff33] hover:border-[#0bffff] rounded-xl p-4 transition-all duration-300 group">
                        <div class="flex flex-col items-center text-center">
                            <i class="bi bi-bar-chart text-2xl text-[#0bffff] group-hover:text-[#062441] mb-2 transition-colors duration-300"></i>
                            <span class="text-sm font-medium text-[#0bffff] group-hover:text-[#062441] transition-colors duration-300">گزارشات</span>
                        </div>
                    </a>
                </div>
            </div>

            <!-- آخرین سفارشات -->
            <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] border border-[#0bffff33] rounded-2xl p-6 shadow-lg backdrop-blur-sm group hover:border-[#0bffff] hover:shadow-[0_0_30px_rgba(11,255,255,0.2)] transition-all duration-500">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-black text-white flex items-center gap-2">
                        <span class="w-2 h-6 bg-gradient-to-b from-[#0bffff] to-[#0bffffee] rounded-full"></span>
                        آخرین سفارشات
                    </h2>
                    <a href="#" class="text-[#0bffffaa] hover:text-[#0bffff] text-sm transition-colors duration-300">مشاهده همه</a>
                </div>
                <div class="space-y-4">
                    {% for i in last_orders %}
                    <div class="flex justify-between items-center p-4 bg-[#0b142133] rounded-xl border border-[#0bffff22] hover:border-[#0bffff] transition-all duration-300">
                        <div class="flex items-center gap-4">
                            <div class="w-10 h-10 bg-gradient-to-br from-[#0bffff33] to-[#0bffff11] rounded-lg flex items-center justify-center">
                                <i class="bi bi-check-lg text-[#0bffff] text-sm"></i>
                            </div>
                            <div>
                                <p class="text-white font-medium">سفارش #{{ i.pk }}</p>
                                <p class="text-[#0bffffaa] text-xs">{{ i.order.name }} {{ i.order.lastname }}</p>
                            </div>
                        </div>
                        <span class="text-lg font-black text-[#0bffff]">{{ i.totalprice }} تومان</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- چارت سود ماهیانه و محصولات پرفروش -->
        <div class="grid grid-cols-1 lg:grid-cols-1 gap-6 mt-6">
            <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] border border-[#0bffff33] rounded-2xl p-6 shadow-lg backdrop-blur-sm group hover:border-[#0bffff] hover:shadow-[0_0_30px_rgba(11,255,255,0.2)] transition-all duration-500">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-black text-white flex items-center gap-2">
                        <span class="w-2 h-6 bg-gradient-to-b from-[#0bffff] to-[#0bffffee] rounded-full"></span>
                        سود ماهیانه فروشگاه
                    </h2>
                    <select class="bg-[#0b1421aa] border border-[#0bffff44] rounded-lg px-3 py-2 text-white text-sm focus:border-[#0bffff] outline-none">
                        <option>۳ ماه اخیر</option>
                        <option>۶ ماه اخیر</option>
                        <option>سال جاری</option>
                    </select>
                </div>
                
                <!-- نمودار سود ماهیانه -->
                <div class="h-64 bg-[#0b142133] rounded-xl border border-[#0bffff22] flex items-end justify-between p-6">
                    {% for profit in profits %}
                        <div class="flex flex-col items-center">
                            <div class="w-10 bg-gradient-to-t from-[#0bffff] to-[#0bffffee] rounded-t-lg transition-all duration-500"
                                style="height: {{ profit.total_profit|floatformat:0 }}px; max-height: 200px;">
                            </div>
                            <span class="text-[#0bffffaa] text-xs mt-3">
                                {{ profit.year }}/{{ profit.month }}
                            </span>
                            <span class="text-[#0bffff] text-xs font-bold mt-1">{{ profit.total_profit }}</span>
                        </div>
                    {% endfor %}
                </div>
                
                <!-- آمار کلی سود -->
                <div class="grid grid-cols-3 gap-4 mt-6">
                    <div class="text-center">
                        <p class="text-[#0bffffaa] text-sm">میانگین ماهیانه</p>
                        <p class="text-xl font-black text-[#0bffff]">{{ avg_profit|floatformat:1 }} M</p>
                    </div>
                    <div class="text-center">
                        <p class="text-[#0bffffaa] text-sm">بیشترین سود</p>
                        <p class="text-xl font-black text-[#0bffff]">{{ highest_profit|floatformat:1 }} M</p>
                    </div>
                    <div class="text-center">
                        <p class="text-[#0bffffaa] text-sm">رشد</p>
                        <p class="text-xl font-black text-[#4ecdc4]">+٪</p>
                    </div>
                </div>
            </div>

            <!-- محصولات پرفروش -->
            <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] border border-[#0bffff33] rounded-2xl p-6 shadow-lg backdrop-blur-sm group hover:border-[#0bffff] hover:shadow-[0_0_30px_rgba(11,255,255,0.2)] transition-all duration-500">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-black text-white flex items-center gap-2">
                        <span class="w-2 h-6 bg-gradient-to-b from-[#0bffff] to-[#0bffffee] rounded-full"></span>
                        محصولات پربازدید
                    </h2>
                    <a href="#" class="text-[#0bffffaa] hover:text-[#0bffff] text-sm transition-colors duration-300">مشاهده همه</a>
                </div>
                <div class="space-y-4">
                    {% for i in top_view_product %}
                        <div class="bg-[#0b142133] rounded-xl p-4 border border-[#0bffff22] hover:border-[#0bffff] transition-all duration-300">
                            <div class="flex items-center gap-4">
                                <div class="w-16 h-16 bg-gradient-to-br from-[#0bffff33] to-[#0bffff11] rounded-lg flex items-center justify-center">
                                    <i class="bi bi-phone text-[#0bffff] text-xl"></i>
                                </div>
                                <div class="flex-1">
                                    <h3 class="font-bold text-white">{{ i.name }}</h3>
                                    <p class="text-[#0bffffaa] text-sm mt-1">{{ i.views }} بازدید • {{ i.total_sale }} فروش</p>
                                </div>
                                <div class="text-right">
                                    <span class="text-lg font-black text-[#0bffff]">{{ i.price_ }}</span>
                                    <p class="text-[#0bffffaa] text-xs">تومان</p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </main>
</section>
{% endblock seller_con %}