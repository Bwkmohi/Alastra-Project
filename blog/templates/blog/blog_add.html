{% extends 'blog/base.html' %}

{% block blog_con %}

<title>
    Ø§ÙØ²ÙˆØ¯Ù† ÙˆØ¨Ù„Ø§Ú¯ 
</title>

<form method="POST" enctype="multipart/form-data" class="max-w-6xl mx-auto md:p-8 p-4 bg-gradient-to-br from-[#0b1421] via-[#062441] to-[#041b2d] rounded-3xl shadow-2xl shadow-[#0bffff33] border border-[#0bffff33] backdrop-blur-sm" dir="rtl">
    
    {% csrf_token %}
    
    <!-- Ù‡Ø¯Ø± Ù„ÙˆÚ©Ø³ -->
    <div class="text-center mb-12 relative">
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-[#0bffff22] to-transparent blur-xl"></div>
        <h2 class="text-5xl font-black bg-gradient-to-r from-[#0bffff] via-[#0bffffee] to-[#0bffffcc] bg-clip-text text-transparent relative drop-shadow-[0_0_30px_rgba(11,255,255,0.6)]">
            Ø§ÛŒØ¬Ø§Ø¯ Ø¨Ù„Ø§Ú¯ Ø¬Ø¯ÛŒØ¯
        </h2>
        <p class="text-[#0bffffaa] text-lg mt-4 font-medium">Ù…Ø­ØªÙˆØ§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø®Ù„Ù‚ Ú©Ù†ÛŒØ¯</p>
    </div>

    <!-- Ø±Ø¯ÛŒÙ Ø§ÙÙ‚ÛŒ Ø§ÙˆÙ„ - Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ØµÙ„ÛŒ -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-2 md:gap-6 mb-8">
        <!-- Ú©Ø§Ø±Øª Ø¹Ù†ÙˆØ§Ù† -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:p-6 p-4 border border-[#0bffff33] shadow-lg backdrop-blur-sm">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                    <span class="text-[#062441] font-bold">ğŸ“</span>
                </div>
                <h3 class="text-lg font-black text-white">Ø¹Ù†ÙˆØ§Ù† Ø¨Ù„Ø§Ú¯</h3>
            </div>
            <input type="text" name="title" required 
                   class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-xl px-4 py-3 text-white placeholder-[#0bffff66] font-medium focus:border-[#0bffff] focus:shadow-[0_0_15px_rgba(11,255,255,0.3)] outline-none transition-all"
                   placeholder="Ø¹Ù†ÙˆØ§Ù† Ø¬Ø°Ø§Ø¨...">
        </div>

        <!-- Ú©Ø§Ø±Øª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:p-6 p-4 border border-[#0bffff33] shadow-lg backdrop-blur-sm">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                    <span class="text-[#062441] font-bold">ğŸ“‚</span>
                </div>
                <h3 class="text-lg font-black text-white">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</h3>
            </div>
            <select name="category_id" 
                    class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-xl px-4 py-3 text-white font-medium focus:border-[#0bffff] focus:shadow-[0_0_15px_rgba(11,255,255,0.3)] outline-none appearance-none">
                {% for category in categorys %}
                    <option value="{{ category.id }}" class="bg-[#0b1421]">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- Ú©Ø§Ø±Øª Ø²Ù…Ø§Ù† Ù…Ø·Ø§Ù„Ø¹Ù‡ -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:p-6 p-4 border border-[#0bffff33] shadow-lg backdrop-blur-sm">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                    <span class="text-[#062441] font-bold">â±</span>
                </div>
                <h3 class="text-lg font-black text-white">Ø²Ù…Ø§Ù† Ù…Ø·Ø§Ù„Ø¹Ù‡</h3>
            </div>
            <input type="number" name="time_read" 
                   class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-xl px-4 py-3 text-white placeholder-[#0bffff66] font-medium focus:border-[#0bffff] focus:shadow-[0_0_15px_rgba(11,255,255,0.3)] outline-none transition-all"
                   placeholder="Ø¯Ù‚ÛŒÙ‚Ù‡">
        </div>
    </div>

    <!-- Ø±Ø¯ÛŒÙ Ø§ÙÙ‚ÛŒ Ø¯ÙˆÙ… - ØªØµÙˆÛŒØ± Ùˆ Ø®Ù„Ø§ØµÙ‡ -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-2 md:gap-6 mb-8">
        <!-- Ú©Ø§Ø±Øª ØªØµÙˆÛŒØ± Ø´Ø§Ø®Øµ -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:p-6 p-4 border border-[#0bffff33] shadow-lg backdrop-blur-sm">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                    <span class="text-[#062441] font-bold">ğŸ–¼</span>
                </div>
                <h3 class="text-lg font-black text-white">ØªØµÙˆÛŒØ± Ø´Ø§Ø®Øµ</h3>
            </div>
            <div class="border-2 border-dashed border-[#0bffff44] rounded-xl p-4 text-center hover:border-[#0bffff] transition-colors cursor-pointer">
                <input type="file" name="image" accept="image/*" class="hidden" id="image-upload" required>
                <label for="image-upload" class="cursor-pointer block">
                    <div class="text-[#0bffffaa] mb-2">
                        <svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                    </div>
                    <span class="text-[#0bffff] font-medium">Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ±</span>
                    <span class="text-[#0bffffaa] text-sm block mt-1">PNG, JPG, GIF</span>
                </label>
            </div>
        </div>

        <!-- Ú©Ø§Ø±Øª Ø®Ù„Ø§ØµÙ‡ -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:p-6 p-4 border border-[#0bffff33] shadow-lg backdrop-blur-sm">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                    <span class="text-[#062441] font-bold">ğŸ“„</span>
                </div>
                <h3 class="text-lg font-black text-white">Ø®Ù„Ø§ØµÙ‡ </h3>
            </div>
            <textarea name="short_des" rows="4" required
                      class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-xl px-4 py-3 text-white placeholder-[#0bffff66] font-medium resize-none focus:border-[#0bffff] focus:shadow-[0_0_15px_rgba(11,255,255,0.3)] outline-none transition-all"
                      placeholder="ØªÙˆØµÛŒØ­Ø§Øª Ú©ÙˆØªØ§Ù‡ Ø¨Ù„Ø§Ú¯"></textarea>
        </div>
    </div>

    <!-- Ø¨Ø®Ø´ Ù…Ø­ØªÙˆØ§ÛŒ Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© -->
    <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:p-6 p-4 border border-[#0bffff33] shadow-lg backdrop-blur-sm mb-8">
        <div class="flex items-center justify-between mb-6">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                    <span class="text-[#062441] font-bold">ğŸ“</span>
                </div>
                <h3 class="text-xl font-black text-white">Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø­ØªÙˆØ§</h3>
            </div>
            <span id="content-counter" class="bg-gradient-to-r from-[#0bffff33] to-[#0bffff11] text-[#0bffff] px-4 py-2 rounded-full font-bold text-sm border border-[#0bffff33]">
                Û° Ø¨Ø®Ø´
            </span>
        </div>

        <div id="content-container" class="space-y-4">
            <!-- Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø­ØªÙˆØ§ Ø§ÛŒÙ†Ø¬Ø§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
        </div>

        <!-- Ø¯Ú©Ù…Ù‡ Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø®Ø´ -->
        <button type="button" id="add-content-btn"
                class="w-full mt-6 py-4 bg-gradient-to-r from-[#0bffff33] to-[#0bffff11] border-2 border-dashed border-[#0bffff44] text-[#0bffff] font-bold rounded-2xl transition-all duration-300 hover:border-[#0bffff] hover:bg-gradient-to-r hover:from-[#0bffff44] hover:to-[#0bffff22] hover:shadow-[0_0_20px_rgba(11,255,255,0.3)] group">
            <div class="flex items-center justify-center gap-3">
                <span class="text-2xl group-hover:scale-110 transition-transform">+</span>
                <span>Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø®Ø´ Ø¬Ø¯ÛŒØ¯</span>
            </div>
        </button>
    </div>

    <!-- Ø¯Ú©Ù…Ù‡ Ø§Ø±Ø³Ø§Ù„ -->
    <div class="flex gap-4">
        <button type="button" class="flex-1 py-4 bg-gradient-to-r from-[#ff6b6b33] to-[#ff6b6b11] border border-[#ff6b6b44] text-[#ff6b6b] font-bold rounded-2xl transition-all duration-300 hover:border-[#ff6b6b] hover:shadow-[0_0_20px_rgba(255,107,107,0.3)]">
            Ø§Ù†ØµØ±Ø§Ù
        </button>
        <button type="submit" name="status" value="False" 
                class="flex-1 py-4 bg-gradient-to-r from-[#0bffff] via-[#0bffffee] to-[#0bffff] text-[#062441] font-black md:text-lg text-sm rounded-2xl shadow-2xl shadow-[#0bffff66] transition-all duration-500 hover:shadow-[0_0_40px_rgba(11,255,255,0.8)] hover:scale-[1.02]">
            Ø°Ø®ÛŒØ±Ù‡ Ù¾Ø³Ø´ Ù†ÙˆÛŒØ³ Ùˆ Ø¹Ø¯Ù… Ø§Ù†ØªØ´Ø§Ø±
        </button>
        <button type="submit" name="status" value="True"
                class="flex-1 py-4 bg-gradient-to-r from-[#0bffff] via-[#0bffffee] to-[#0bffff] text-[#062441] font-black md:text-lg text-sm rounded-2xl shadow-2xl shadow-[#0bffff66] transition-all duration-500 hover:shadow-[0_0_40px_rgba(11,255,255,0.8)] hover:scale-[1.02]">
            ğŸš€ Ø§Ù†ØªØ´Ø§Ø± Ø¨Ù„Ø§Ú¯
        </button>

    </div>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const contentContainer = document.getElementById('content-container');
        const addContentBtn = document.getElementById('add-content-btn');
        const contentCounter = document.getElementById('content-counter');

        function updateContentCounter() {
            const count = contentContainer.children.length;
            contentCounter.textContent = `${count} Ø¨Ø®Ø´`;
        }

        function createContentSection(index) {
            const section = document.createElement('div');
            section.className = 'bg-gradient-to-br from-[#0b142188] to-[#06244188] rounded-2xl p-6 border border-[#0bffff33] shadow-lg backdrop-blur-sm';
            
            section.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-lg flex items-center justify-center">
                            <span class="text-[#062441] font-bold text-sm">${index + 1}</span>
                        </div>
                        <h4 class="text-lg font-black text-white">Ø¨Ø®Ø´ Ù…Ø­ØªÙˆØ§</h4>
                    </div>
                    <button type="button" class="remove-content-btn w-8 h-8 bg-[#0b1421aa] hover:bg-[#ff555533] text-[#0bffffaa] hover:text-[#ff5555] rounded-lg flex items-center justify-center border border-[#0bffff33] hover:border-[#ff5555] transition-all duration-300">
                        âœ•
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-[#0bffffdd] text-sm font-medium mb-2">Ø¹Ù†ÙˆØ§Ù† Ø¨Ø®Ø´</label>
                        <input type="text" name="content_titles[]" required
                               class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-lg px-3 py-2 text-white placeholder-[#0bffff66] text-sm focus:border-[#0bffff] outline-none transition-all"
                               placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§ÛŒÙ† Ø¨Ø®Ø´...">
                    </div>
                    
                    <div>
                        <label class="block text-[#0bffffdd] text-sm font-medium mb-2">ØªØµÙˆÛŒØ± Ø¨Ø®Ø´</label>
                        <input type="file" name="content_images[]" accept="image/*"
                               class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-lg px-3 py-2 text-[#0bffffdd] text-sm file:bg-[#0bffff33] file:border-0 file:rounded file:px-3 file:py-1 file:text-[#0bffff] file:text-sm file:mr-2 focus:border-[#0bffff] outline-none">
                    </div>
                </div>

                <div class="mt-4">
                    <label class="block text-[#0bffffdd] text-sm font-medium mb-2">Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ</label>
                    <textarea name="content_bodies[]" required rows="3"
                              class="w-full bg-[#0b1421aa] border border-[#0bffff44] rounded-lg px-3 py-2 text-white placeholder-[#0bffff66] text-sm resize-none focus:border-[#0bffff] outline-none transition-all"
                              placeholder="Ù…Ø­ØªÙˆØ§ÛŒ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
                </div>
            `;

            // Ø­Ø°Ù Ø¨Ø®Ø´
            section.querySelector('.remove-content-btn').addEventListener('click', function() {
                section.style.opacity = '0';
                section.style.transform = 'translateX(20px)';
                setTimeout(() => {
                    section.remove();
                    updateContentCounter();
                    updateSectionNumbers();
                }, 300);
            });

            return section;
        }

        function updateSectionNumbers() {
            const sections = contentContainer.querySelectorAll('.content-item');
            sections.forEach((section, index) => {
                const numberSpan = section.querySelector('.w-8 h-8 span');
                if (numberSpan) {
                    numberSpan.textContent = index + 1;
                }
            });
        }

        // Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ø®Ø´ Ø¬Ø¯ÛŒØ¯
        addContentBtn.addEventListener('click', function() {
            const newIndex = contentContainer.children.length;
            const newSection = createContentSection(newIndex);
            
            newSection.style.opacity = '0';
            newSection.style.transform = 'translateY(20px)';
            contentContainer.appendChild(newSection);
            
            setTimeout(() => {
                newSection.style.opacity = '1';
                newSection.style.transform = 'translateY(0)';
            }, 10);
            
            updateContentCounter();
        });

        // Ù…Ø¯ÛŒØ±ÛŒØª Ø¢Ù¾Ù„ÙˆØ¯ ØªØµÙˆÛŒØ± Ø§ØµÙ„ÛŒ
        const imageUpload = document.getElementById('image-upload');
        const uploadArea = imageUpload.parentElement;

        imageUpload.addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                uploadArea.classList.remove('border-dashed');
                uploadArea.classList.add('border-solid', 'border-[#0bffff]', 'bg-[#0bffff11]');
            }
        });

        // Ø§ÙØ²ÙˆØ¯Ù† ÛŒÚ© Ø¨Ø®Ø´ Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´ÙØ±Ø¶
        setTimeout(() => addContentBtn.click(), 100);
        updateContentCounter();
    });
</script>
{% endblock %}
