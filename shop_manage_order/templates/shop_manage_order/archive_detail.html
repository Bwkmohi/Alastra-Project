{% extends 'shop_manage_order/base.html' %}
{% block shop_ord %}

<title>
    لیست ازشیو سفارشات
</title>

 <style>
  /* سبک تایتل */
.section-title {
    font-size: 2.5rem;
    font-weight: bold;
    color: #0bffffee;
    position: relative;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding-bottom: 10px;
    display: inline-block;
}

/* انیمیشن متحرک برای تایتل */
.section-title::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(135deg, #062441, #0bffffcc);
    animation: lineMove 2s ease-in-out infinite;
}

/* انیمیشن حرکت خط پایین تایتل */
@keyframes lineMove {
    0% {
        transform: scaleX(0);
        transform-origin: bottom right;
    }
    50% {
        transform: scaleX(1);
        transform-origin: bottom left;
    }
    100% {
        transform: scaleX(0);
        transform-origin: bottom right;
    }
}

/* افکت هاله برای تایتل */
.section-title:hover {
    color: #fff;
    text-shadow: 0 0 15px rgba(11, 255, 255, 0.8);
    animation: glowEffect 1.5s ease-in-out infinite alternate;
}

/* افکت هاله برای تایتل */
@keyframes glowEffect {
    0% {
        text-shadow: 0 0 10px rgba(11, 255, 255, 0.6), 0 0 20px rgba(11, 255, 255, 0.4);
    }
    100% {
        text-shadow: 0 0 20px rgba(11, 255, 255, 0.9), 0 0 30px rgba(11, 255, 255, 0.8);
    }
}

</style>

<div class="grid grid-cols-2 md:grid-cols-3 gap-3 sm:p-5">
 
  <a href="{% url 'ord:archive_list' shop_id %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-layout-text-sidebar text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">لیست آرشیو سفارش</p>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>

  <a href="{% url 'ord:orders_list' shop_id %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-bag text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">لیست سفارشات</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_paid_reservs }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>
  <a href="{% url 'ord:list_filtered_orders' shop_id 'sended' %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-bag-check text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">سفارشات ارسال شده</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_send_reservs }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>
  <a href="{% url 'ord:list_filtered_orders' shop_id 'unsended' %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-bag-dash text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">ارسال نشده</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_unsend_reservs }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>

  <a href="{% url 'ord:list_filtered_orders' shop_id 'canceled' %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-bag-x text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">لغو ارسال شده</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_canceled_reservs }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>

  <a href="{% url 'ord:list_filtered_orders' shop_id 'today' %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-calendar2-week text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">سفارشات امروز</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_today_reservs }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>
</div>

  <h2 class="section-title sm:text-3xl px-4 text-3xl font-bold mb-10 text-center">
        آرشیو سفارشات <span class="font-sans">{% if month %}{{ year }}/{{ month }}{% else %}{{ year }}{% endif %}</span>
  </h2>
<div class="max-w-6xl mx-auto sm:p-6 space-y-6">




  {% if orders %}
    <ul class="space-y-6">
      {% for order in orders %}
        <li class="bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl p-6 flex flex-col md:flex-row justify-between items-start hover:scale-105 transition-transform duration-300">
          
          <!-- ستون اول: اطلاعات اصلی -->
          <div class="flex-1 space-y-2 pr-4 border-r border-[#0bffff44]">
            <p class="text-[#b0bfd1] font-bold"><span class="text-[#0bffffcc]"></span><span class="text-white">{{ order.id }}</span>#</p>
            <p class="text-[#b0bfd1] font-bold">گیرنده: <span class="text-white">{{ order.name }} / {{ order.lastname }}</span></p>
            <p class="text-[#b0bfd1] font-bold">شهر/استان: <span class="text-white">{{ order.city.name }} / {{ order.province.name }}</span></p>
            <p class="text-[#b0bfd1] font-bold text-xs">تاریخ ثبت سفارش: <span class="text-[#0bffffcc] font-sans">{{ order.created_at|date:"m/d H:i" }}</span></p>
          </div>

          <!-- ستون دوم: جزئیات بیشتر -->
          <div class="flex-1 flex flex-col justify-between pl-4 mt-4 md:mt-0 space-y-2">
            <p class="text-[#b0bfd1] font-bold">مبلغ کل: <span class="text-[#0bffffcc] font-sans">{{ order.total_price }} <span class="font-serif">تومان</span></span></p>
            
            <p class="text-[#b0bfd1] font-bold"> پرداخت: 
              <span class="px-2 py-1 rounded-full font-semibold {% if order.paid %}text-green-700{% else %}text-red-600{% endif %}">
                {% if order.paid %}<i class="bi bi-check-circle"></i>{% else %}<i class="bi bi-x-circle"></i> {% endif %}
              </span>
            </p>

            {% if order.tracking_code %}
              <p class="text-[#b0bfd1] font-bold">کد رهگیری: <span class="text-[#0bffffcc] font-semibold">{{ order.tracking_code }}</span></p>
            {% endif %}

            <a href="{% url 'res:order_detail' order.id %}" 
               class="mt-2 inline-block px-6 py-2 bg-[#0bffff44] hover:bg-[#0bffffcc] text-[#062441] font-bold rounded-2xl shadow-md hover:shadow-[#0bffffcc]/60 transition-all text-center">
              مشاهده جزئیات
            </a>
          </div>

        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-center text-[#0b1421] font-semibold text-xl">هیچ سفارشی در این بازه زمانی موجود نیست.</p>
  {% endif %}
</div>
{% endblock %}