{% extends 'shop_questions/base.html' %}
{% block shop_questions %}

<title>
    مدیریت کامنت‌ها
</title>

<style>
  /* سبک تایتل */
.section-title {
    font-size: 2.5rem;
    font-weight: bold;
    color: #0bffffee;
    position: relative;
    text-transform: uppercase;
    letter-spacing: 2px;
    padding-bottom: 10px;
    display: inline-block;
}

/* انیمیشن متحرک برای تایتل */
.section-title::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(135deg, #062441, #0bffffcc);
    animation: lineMove 2s ease-in-out infinite;
}

/* انیمیشن حرکت خط پایین تایتل */
@keyframes lineMove {
    0% {
        transform: scaleX(0);
        transform-origin: bottom right;
    }
    50% {
        transform: scaleX(1);
        transform-origin: bottom left;
    }
    100% {
        transform: scaleX(0);
        transform-origin: bottom right;
    }
}

/* افکت هاله برای تایتل */
.section-title:hover {
    color: #fff;
    text-shadow: 0 0 15px rgba(11, 255, 255, 0.8);
    animation: glowEffect 1.5s ease-in-out infinite alternate;
}

/* افکت هاله برای تایتل */
@keyframes glowEffect {
    0% {
        text-shadow: 0 0 10px rgba(11, 255, 255, 0.6), 0 0 20px rgba(11, 255, 255, 0.4);
    }
    100% {
        text-shadow: 0 0 20px rgba(11, 255, 255, 0.9), 0 0 30px rgba(11, 255, 255, 0.8);
    }
}

</style>

<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-5">

  <!-- کارت پاسخ‌ها -->
  <a href="{% url 's_ques:list_responses' shop_id %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-reply-all-fill text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">لیست پاسخ‌ها</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_responses }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>

  <!-- کارت کامنت‌ها -->
  <a href="{% url 's_ques:list_comments' shop_id %}" class="relative group bg-gradient-to-br from-[#0b1421] via-[#062441] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-chat-dots-fill text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">لیست کامنت‌ها</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_comments }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>

  <!-- کارت سوالات -->
  <a href="{% url 's_ques:list_questions' shop_id %}" class="relative group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0d4370] rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300 p-6 flex flex-col items-center justify-center text-center">
    <i class="bi bi-question-circle-fill text-5xl text-[#b0ffd1] mb-3 transition-all duration-300 group-hover:text-[#ffffff]"></i>
    <p class="font-bold text-lg text-white group-hover:text-[#b0ffd1]">لیست سوالات</p>
    <span class="absolute top-3 right-3 bg-[#0bffff44] text-[#0b1421] px-2 py-1 rounded-full text-xs font-bold">{{ count_shop_questions }}</span>
    <button class="mt-4 bg-[#0bffffcc] text-[#0b1421] font-bold px-4 py-2 rounded hover:bg-[#0bffffee] transition">مشاهده</button>
  </a>

</div>

    <h2 class="section-title sm:text-4xl text-3xl font-bold mb-10 text-center">لیست کامنت ها</h2>
 

  <div class="min-h-screen bg-gradient-to-br from-[#0b1421] via-[#0b1421] to-[#041b2d] p-4 md:p-6">
    <div class="max-w-6xl mx-auto">
        
        <!-- هدر صفحه -->
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6 md:mb-8">
            <div class="flex items-center gap-3 md:gap-4">
                <div class="w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br from-[#0bffff] to-[#0bffffee] rounded-xl md:rounded-2xl flex items-center justify-center">
                    <i class="bi bi-play-circle text-lg md:text-2xl text-[#062441]"></i>
                </div>
                <div>
                    <h1 class="text-2xl md:text-4xl font-black bg-gradient-to-r from-[#0bffff] via-[#0bffffee] to-[#0bffffcc] bg-clip-text text-transparent">
                        استوری‌های فروشگاه
                    </h1>
                    <p class="text-[#0bffffaa] mt-1 md:mt-2 text-sm md:text-base">مدیریت و مشاهده استوری‌های فروشگاه</p>
                </div>
            </div>
        </div>

        <!-- لیست استوری‌ها -->
        <div class="bg-gradient-to-bl from-[#06244188] to-[#0b142188] rounded-2xl md:rounded-3xl border border-[#0bffff33] shadow-2xl shadow-[#0bffff11] backdrop-blur-sm p-4 md:p-6">
            
            <!-- هدر -->
            <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-6">
                <h3 class="text-lg md:text-xl font-black text-white flex items-center gap-2 md:gap-3">
                    <i class="bi bi-collection-play text-[#0bffff]"></i>
                    استوری‌های فعال
                </h3>
                
                <div class="flex items-center gap-2 md:gap-4">
                    <div class="relative">
                        <input type="text" placeholder="جستجو در استوری‌ها..." 
                               class="bg-[#0b1421aa] border border-[#0bffff44] rounded-xl px-3 md:px-4 py-2 pr-8 md:pr-10 text-white placeholder-[#0bffff66] focus:border-[#0bffff] focus:shadow-[0_0_15px_rgba(11,255,255,0.3)] outline-none transition-all text-sm md:text-base w-full md:w-64">
                        <i class="bi bi-search absolute left-2 md:left-3 top-1/2 transform -translate-y-1/2 text-[#0bffffaa] text-sm"></i>
                    </div>
                </div>
            </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        {% for i in comments %}
          <div class="group bg-gradient-to-br from-[#062441] via-[#0b1421] to-[#0b1421] border border-[#0bffffcc] p-5 shadow-md hover:shadow-lg transition cursor-pointer relative border-r-8 border-[#0bffffcc]"
              style="border-radius: 30px 5px 30px 5px;">
            <h3 class="text-xl font-extrabold text-[#0bffffcc] mb-3" dir="rtl"><a href="{% url 'product_detail' i.product.id i.product.slug %}">{{ i.product.name }}</a></h3>
            <div class="w-full mx-auto h-[0.2px] text-[#0bffffcc] bg-[#0bffffcc] text-center mb-2"></div>
            <p class="text-[#ffff] mb-4 line-clamp-3 break-words whitespace-normal" dir="rtl">
                {{ i.message_ }}
            </p>
            <a 
              href="{% url 's_ques:remove_comment' shop_id i.id %}"
              class="absolute top-3 left-3 bg-red-500 hover:bg-red-700 text-white text-xs px-3 py-1 rounded 
                    opacity-0 transform -translate-y-2 group-hover:opacity-100 group-hover:translate-y-0 
                    transition-all duration-300 ease-in-out"
              dir="ltr"
              aria-label="حذف کامنت"
            >
              <i class="bi bi-trash"></i>
            </a>


            <div class="flex items-center justify-between text-gray-400 text-sm" dir="rtl">
              <span class="text-sm text-[#0bffffcc] font-sans">{{ i.created_at|date:"Y/m/d" }}</span>
              <div class="flex space-x-1 rtl:space-x-reverse">
                  <div class="flex items-center gap-2 mb-4">
  
  
                      <div class="flex text-yellow-400">
                        {% if i.rating == 1 or rate == 1.5 or i.rating > 1 and i.rating < 2 %}
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star"></i>
                          <i class="bi bi-star"></i>
                          <i class="bi bi-star"></i>
                          <i class="bi bi-star"></i>                   
                        {% elif i.rating == 2 or i.rating == 2.5 or i.rating > 2 and i.rating < 3 %}
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star"></i>
                          <i class="bi bi-star"></i>
                          <i class="bi bi-star"></i>
                          {% elif i.rating == 3 or i.rating == 3.5 or i.rating > 3 and i.rating < 4 %}
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star"></i>
                          <i class="bi bi-star"></i>
                          {% elif i.rating == 4 or i.rating == 4.5 %}
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star"></i>
                          {% else %}
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          <i class="bi bi-star-fill"></i>
                          {% endif %}
                      </div>
                  </div>
                </svg>
              </div>
            </div>
          </div>
        {% endfor %}      
      </div>

        </div>
    </div>
</div>



{% endblock %}