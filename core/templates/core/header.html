{% load static %}

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="فروشگاه تخصصی لپ‌تاپ و کامپیوتر با تخفیف‌های شگفت‌انگیز | {% if site_info.site_title %} {{ site_info.site_title }} {% else %}Alastra{% endif %}">
    <meta name="keywords" content="خرید لپ تاپ, کامپیوتر, {% if site_info.site_title %} {{ site_info.site_title }} {% else %}Alastra{% endif %}, فروشگاه آنلاین, لوازم جانبی لپ‌تاپ">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="robots" content="index, follow">

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="manifest" href="{% static 'core/js/manifest.json' %}">


      <link rel="icon" href="{% if site_info.favicon %}{{ site_info.favicon.url }}?v=2{% endif %}">
      <link rel="icon" href="/core/static/alastra.ico">





    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#062441',
                secondary: '#0d4370',
                text: '#0b1421'
              },
              fontFamily: {
                serif: ['serif']
              }
            }
          }
        }
        
      </script>
      <script src="https://cdn.tailwindcss.com"></script>


</head>
<body class="bg-[#0b1421] text-[#F5F7F9] font-serif" dir="rtl">

<div id="notification" class="fixed top-32 left-1/2 -translate-x-1/2 max-w-lg w-[90vw] rounded-xl shadow-lg
    bg-gradient-to-r from-[#062441cc] via-[#0b1421dd] to-[#062441cc]
    text-[#0bffffcc]
    font-extrabold
    px-8 py-6
    z-50
    opacity-0 pointer-events-none
    transform -translate-y-12 scale-95
    transition-all duration-500 ease-out
    flex items-center space-x-4 rtl:space-x-reverse
    backdrop-blur-sm
    border border-[#0bffff44]
  ">
    <svg id="notification-icon" xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M12 18a6 6 0 100-12 6 6 0 000 12z" />
    </svg>
    <p id="notification-message" class="flex-1 text-right leading-tight text-sm md:text-base"></p>
    <button id="notification-close" aria-label="بستن" class="text-[#0bffffcc] hover:text-[#0bffffee] transition">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </div>
 
 

<style>
    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }
    .no-scrollbar {
      -ms-overflow-style: none;  /* IE و Edge */
      scrollbar-width: none;     /* Firefox */
    }
    body {
      padding-top: 5rem; /* برای جا دادن header ثابت */
    }
    * {
      user-select: none;
    }
    html {
      touch-action: manipulation;
    }
 
  @keyframes shines {
    0% {
      background-position: 200% 0;
    }
    100% {
      background-position: -200% 0;
    }
  }
 
  @keyframes shines {
    0% {
      background-position: 200% center;
    }
    100% {
      background-position: -200% center;
    }
  }

  @keyframes slideDown {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slideDown {
    animation: slideDown 0.25s ease forwards;
  }
</style>



 

<header id="main-header" class="fixed top-2 right-0 left-0 z-50 bg-gradient-to-r from-[#062441] via-[#0b1421] to-[#0b1421] shadow-2xl" dir="rtl">
  <div class="max-w-7xl mx-auto px-6 py-6 flex items-center justify-between">
    <div class="flex items-center space-x-3 rtl:space-x-reverse">
    {% if site_info.web_header %}
      <img src="{{ site_info.web_header.url }}" class="{% if site_info.web_header_style_class %}{{ site_info.web_header_style_class }}{% endif %}" alt="{% if site_info.site_title %} {{ site_info.site_title }} {% endif %}">
    {% else %}
      <div
        class="font-extrabold italic text-3xl tracking-wider select-none cursor-pointer bg-gradient-to-r from-[#0b1421] via-[#0bffffcc] to-[#b0bfd1] bg-clip-text text-transparent drop-shadow-lg"
        style="background-size: 200% auto; animation: shines 5s linear infinite;">
         {% if site_info.site_title %} {{ site_info.site_title }} {% else %}Alastra{% endif %}
      </div>
    {% endif %}
    </div>


    <nav class="hidden lg:flex space-x-12 rtl:space-x-reverse text-white font-semibold tracking-wide text-lg select-none">
      <a href="{% url 'index' %}" class="relative group hover:text-[#0bffffcc] transition-colors duration-300">
        خانه
        <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-[#0bffffcc] scale-x-0 group-hover:scale-x-100 transition-transform origin-left"></span>
      </a>
      <a href="{% url 'products_list' %}" class="relative group hover:text-[#0bffffcc] transition-colors duration-300">
        محصولات
        <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-[#0bffffcc] scale-x-0 group-hover:scale-x-100 transition-transform origin-left"></span>
      </a>
      <a href="{% url 'category_view' %}" class="relative group hover:text-[#0bffffcc] transition-colors duration-300">
        دسته بندی ها
        <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-[#0bffffcc] scale-x-0 group-hover:scale-x-100 transition-transform origin-left"></span>
      </a>

    
      <div class="relative inline-block">
        <button
          id="toggleBtn"
          aria-haspopup="true"
          aria-expanded="false"
          class="relative flex items-center gap-1 hover:text-[#0bffffcc] transition-colors duration-300 focus:outline-none"
          aria-controls="extra-menu"
        >
          مشاهده بیشتر
          <svg class="w-4 h-4 mt-1 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" viewBox="0 0 24 24">
            <path d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div
          id="extra-menu"
          class="hidden absolute right-0 mt-2 w-48 bg-[#0b1421] border border-[#0bffffcc] rounded-md shadow-lg z-50"
          role="menu"
          aria-labelledby="toggleBtn"
        >
          <a href="{% url 'best_shops' %}" class="block px-6 py-3 text-white hover:bg-[#0bffffcc]/20 transition-colors duration-200" role="menuitem">فروشگاه‌ها</a>
          <a href="{% url 'blog:list_blogs' %}" class="block px-6 py-3 text-white hover:bg-[#0bffffcc]/20 transition-colors duration-200" role="menuitem">وبلاگ ها</a>
        </div>
      </div>

      <a href="#" class="relative group hover:text-[#0bffffcc] transition-colors duration-300">
        درباره ما
        <span class="absolute bottom-0 left-0 right-0 h-0.5 bg-[#0bffffcc] scale-x-0 group-hover:scale-x-100 transition-transform origin-left"></span>
      </a>


    </nav>
      <button id="real-open-search-modal" class="relative group hover:text-[#0bffffcc] transition-colors duration-300">
       <i class="bi bi-search text-2xl text-[#0bffffcc]"></i>
      </button>

    <div class="hidden md:flex items-center space-x-4 rtl:space-x-reverse">
      {% if not user %}
      <a
        href="{% url 'acc:login' %}"
        class="bg-[#0b1421] text-center hover:bg-[#062441] text-white px-5 py-2 rounded-lg shadow-lg font-semibold transition-colors duration-300"
      >
        ورود
      </a>
      <a
        href="{% url 'acc:sign' %}"
        class="bg-[#0bffffcc] text-center hover:bg-[#0bffffee] text-[#062441] px-5 py-2 rounded-lg shadow-lg font-semibold transition-colors duration-300"
      >
        ثبت‌نام
      </a>
      {% endif %}
    </div>
  </div>
</header>




<div id="real-search-modal" class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[9999] hidden">
  <form id="real-search-form" action="" method="GET" class="bg-gradient-to-r from-[#062441] via-[#0b1421] to-[#0b1421] border border-[#0bffffcc] text-white w-[100%] h-[60vh] md:py-8 py-4 max-w-5xl md:px-12 px-6 rounded-xl shadow-lg relative">
    <button id="real-close-search-modal" class="absolute top-4 left-4 text-white text-2xl">×</button>
    <h2 class="text-4xl font-bold mb-4 mt-10">جستجو <i class="bi bi-search"></i> </h2>
    <br><br>
    <div class="flex flex-row gap-2">
      <div class="w-1/4">
        <label for="" class="text-sm font-bold">جستجو در:</label>
          <select id="search-category" name="" id="" class="w-full px-4 py-3 rounded-xl border-2 border-[#0bffffcc] bg-[#071927dd] placeholder-[#84a9bb] focus:outline-none focus:ring-4 focus:ring-[#0bffffcc]">
            <option value="{% url 'search_products' %}">محصولات</option>
            <option value="{% url 'blog:blog_search' %}">وبلاگ ها</option>
            <option value="{% url 'sellers:shop_search' %}">فروشگاه ها</option>
          </select>
      </div>
      <div class="w-3/4">
          <label for="" class="text-sm font-bold">جستجو :</label>
          <input type="text" required name="q" class="w-full px-4 py-3 rounded-xl border-2 border-[#0bffffcc] bg-[#071927dd] placeholder-[#84a9bb] focus:outline-none focus:ring-4 focus:ring-[#0bffffcc]" />
      </div>
    </div>


    <div class="my-4 text-sm text-[#0bffffcc]">
      <div class="flex flex-wrap gap-3">
        {% for i in category_context %}
            <button class="px-4 py-2 bg-[#0bffffcc] rounded-3xl text-md font-extrabold hover:bg-[#0bffffcc] text-[#062441] transition">
              {{ i.name }}
            </button>
        {% endfor %}
      </div>
    </div>


    <div class="mt-10">
      <h3 class="text-xl font-extrabold text-[#0bffff] mb-4">دسته‌بندی‌های پیشنهادی</h3>
      <div class="grid grid-cols-3 md:gap-4 gap-2">
        <a href="{% url 'products_list' %}" class="group bg-[#071927] border border-[#0bffff33] hover:border-[#0bffffcc] rounded-xl p-4 flex flex-col items-center justify-center text-center transition-all duration-300 shadow-md hover:shadow-[#0bffff44] hover:scale-105">
          <i class="bi bi-box-seam text-3xl text-[#0bffffcc] mb-2 group-hover:text-[#0bffff] transition"></i>
          <span class="font-bold text-sm text-[#b0bfd1] group-hover:text-white">محصولات</span>
        </a>

        <a href="{% url 'blog:list_blogs' %}" class="group bg-[#071927] border border-[#0bffff33] hover:border-[#0bffffcc] rounded-xl p-4 flex flex-col items-center justify-center text-center transition-all duration-300 shadow-md hover:shadow-[#0bffff44] hover:scale-105">
          <i class="bi bi-journal-text text-3xl text-[#0bffffcc] mb-2 group-hover:text-[#0bffff] transition"></i>
          <span class="font-bold text-sm text-[#b0bfd1] group-hover:text-white">وبلاگ ها</span>
        </a>

        <a href="{% url 'best_shops' %}" class="group bg-[#071927] border border-[#0bffff33] hover:border-[#0bffffcc] rounded-xl p-4 flex flex-col items-center justify-center text-center transition-all duration-300 shadow-md hover:shadow-[#0bffff44] hover:scale-105">
          <i class="bi bi-shop text-3xl text-[#0bffffcc] mb-2 group-hover:text-[#0bffff] transition"></i>
          <span class="font-bold text-sm text-[#b0bfd1] group-hover:text-white">فروشگاه‌ها</span>
        </a>
      </div>
    </div>


  
 
    <div class="w-full">
        <button class="mt-4 w-full bg-[#0bffffcc] text-[#062441] font-bold py-2 rounded hover:bg-[#0bffffee]">جستجو</button>
    </div>

  </form>
</div>
<script>
  const openSearchModal = document.getElementById('real-open-search-modal');
  const closeSearchModal = document.getElementById('real-close-search-modal');
  const searchModal = document.getElementById('real-search-modal');

  openSearchModal?.addEventListener('click', () => {
    searchModal.classList.remove('hidden');
  });

  closeSearchModal?.addEventListener('click', () => {
    searchModal.classList.add('hidden');
  });

  // بستن با کلیک روی بیرون از مودال
  searchModal?.addEventListener('click', (e) => {
    if (e.target === searchModal) {
      searchModal.classList.add('hidden');
    }
  });


const select = document.getElementById('search-category');
const form = document.getElementById('real-search-form');

select.addEventListener('change', () => {
  form.action = select.value;
});

form.action = select.value;

</script>


   
 <script>
  // کنترل منوی "مشاهده بیشتر"
  const toggleBtn = document.getElementById("toggleBtn");
  const extraMenu = document.getElementById("extra-menu");

  toggleBtn.addEventListener("click", () => {
    const isExpanded = toggleBtn.getAttribute("aria-expanded") === "true";
    toggleBtn.setAttribute("aria-expanded", String(!isExpanded));
    extraMenu.classList.toggle("hidden");
  });
   
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobileMenu');

  mobileMenuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });

  // بستن منو وقتی روی فضای بیرون کلیک میکنی
  document.addEventListener('click', (e) => {
    if (!mobileMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
      mobileMenu.classList.add('hidden');
    }
  });
 

</script>


<div class="h-20 md:h-24"></div>
 
   
 
 
<div id="modal-panel" class="fixed inset-x-0 bottom-0 bg-gradient-to-r from-[#062441] via-[#0b1421] to-[#0b1421] border-t border-[#0bffffcc] rounded-t-xl shadow-lg transform translate-y-full transition-transform duration-300 z-[9999] p-4">
  <button id="close-modal" class="text-white mb-4 text-right w-full">بستن ×</button>
  <div class="flex flex-col gap-4">
    <a href="{% url 'category_view' %}" class="bg-[#0bffffcc] text-center text-[#062441] font-bold py-2 rounded"><i class="bi bi-columns-gap"></i>دسته بندی ها</a>
    {% if user.is_authenticated %}
      <a href="{% url 'blog:list_blogs' %}" class="bg-[#0bffff] text-[#062441] text-center font-bold py-2 rounded">لیست بلاگ ها</a>
      <a href="{% url 'res:list_reservations' %}" class="bg-[#0bffff] text-[#062441] text-center font-bold py-2 rounded">لیست سفارشات</a>
      <a href="{% url 'list_chathomes' %}" class="bg-[#0bffff] text-[#062441] text-center font-bold py-2 rounded">چت ها</a>
      <a href="{% url 'watchlist:watch_list' %}" class="bg-[#0bffff] text-[#062441] text-center font-bold py-2 rounded">واچ لیست</a>
      <a href="{% url 'com:compare_view' %}" class="bg-[#0bffff] text-[#062441] text-center font-bold py-2 rounded">لیست مقایسه</a>
    {% endif %}
  </div>
</div>

 

<!-- موبایل منو -->
<nav class="fixed bottom-4 right-4 left-4 md:bottom-2 md:right-auto md:left-1/2 md:transform md:-translate-x-1/2 md:w-full bg-gray-900/95 backdrop-blur-xl border border-cyan-500/30 rounded-2xl shadow-2xl shadow-cyan-500/20 z-50">
    <div class="flex justify-between items-center px-4 py-3">
        
        <!-- خانه -->
        <a href="{% url 'index' %}" class="flex flex-col items-center justify-center gap-1 md:px-8 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-cyan-500/10 hover:border-cyan-500/30">
            <i class="bi bi-house-door-fill text-cyan-400 text-lg"></i>
            <span class="text-[#0bffffcc] text-xs font-bold">خانه</span>
        </a>

        <button id="btn-panel" class="flex flex-col items-center justify-center gap-1 md:px-8 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-cyan-500/10 hover:border-cyan-500/30">
            <i class="bi bi-grid-3x3-gap-fill text-gray-400 text-lg"></i>
            <span class="text-gray-400 text-xs font-bold">منو</span>
        </button>

        <!-- محصولات -->
        <a href="{% url 'products_list' %}" class="flex flex-col items-center justify-center gap-1 md:px-8 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-cyan-500/10 hover:border-cyan-500/30">
            <i class="bi bi-box-seam text-gray-400 text-lg"></i>
            <span class="text-gray-400 text-xs font-bold">محصولات</span>
        </a>

        <!-- سبد خرید -->
        <a href="{% url 'cart:cart' %}" class="relative flex flex-col items-center justify-center gap-1 md:px-8 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-cyan-500/10 hover:border-cyan-500/30">
            <i class="bi bi-cart3 text-gray-400 text-lg"></i>
            <span class="text-gray-400 text-xs font-medium">سبد</span>
            <div class="absolute -top-1 -left-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center">
                <span class="text-white text-xs font-bold">{{ qty }}</span>
            </div>
        </a>

        <!-- حساب کاربری -->
        {% if request.user.is_authenticated %}
        <a href="{% url 'acc:pro' %}" class="flex flex-col items-center justify-center gap-1 md:px-8 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-cyan-500/10 hover:border-cyan-500/30">
            <i class="bi bi-person-fill text-gray-400 text-lg"></i>
            <span class="text-gray-400 text-xs font-medium">حساب</span>
        </a>
        {% else %}
        <a href="{% url 'acc:login' %}" class="flex flex-col items-center justify-center gap-1 md:px-8 px-3 py-2 rounded-xl transition-all duration-300 hover:bg-cyan-500/10 hover:border-cyan-500/30">
            <i class="bi bi-box-arrow-in-right text-gray-400 text-lg"></i>
            <span class="text-gray-400 text-xs font-medium">ورود</span>
        </a>
        {% endif %}
    </div>
</nav>

 





{% if messages %}
    {% for message in messages %}

    {% if message.tags == 'info' %}
    <audio autoplay>
      <source src="{% static 'core/info.mp3' %}" type="audio/mpeg">
    </audio>    
      {% elif message.tags == 'error' %}
      <audio autoplay>
        <source src="{% static 'core/error.mp3' %}" type="audio/mpeg">
      </audio>
      {% elif message.tags == 'success' %}
      <audio autoplay>
        <source src="{% static 'core/succsess.mp3' %}" type="audio/mpeg">
      </audio>
      
    {% endif %}
    {% endfor %}        
{% endif %}
      
<script>
  const notification = document.getElementById('notification');
  const messageEl = document.getElementById('notification-message');
  const iconEl = document.getElementById('notification-icon');
  const closeBtn = document.getElementById('notification-close');

  const icons = {
    success: `<path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />`,
    error: `<path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />`,
    warning: `<path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01M12 17a5 5 0 100-10 5 5 0 000 10z" />`,
    info: `<path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M12 18a6 6 0 100-12 6 6 0 000 12z" />`
  };
function showNotification(message, type = "info", duration = 6000) {
  messageEl.textContent = message;
  iconEl.innerHTML = icons[type] || icons.info;

  notification.classList.remove('opacity-0', 'pointer-events-none', 'scale-95', '-translate-y-12');
  notification.classList.add('opacity-100', 'pointer-events-auto', 'scale-100', 'translate-y-0');

  const timeoutId = setTimeout(() => {
    hideNotification();
  }, duration);

  closeBtn.onclick = () => {
    clearTimeout(timeoutId);
    hideNotification();
  };
}

function hideNotification() {
  notification.classList.remove('opacity-100', 'pointer-events-auto', 'scale-100', 'translate-y-0');
  notification.classList.add('opacity-0', 'pointer-events-none', 'scale-95', '-translate-y-12');
}


  // اتصال با جنگو
  {% if messages %}
  document.addEventListener("DOMContentLoaded", () => {
    {% for message in messages %}
      showNotification("{{ message|escapejs }}", "{{ message.tags }}");
    {% endfor %}
  });
  {% endif %}
</script>
      
<script>
  const btnPanel = document.getElementById('btn-panel');
  const modalPanel = document.getElementById('modal-panel');
  const closeModal = document.getElementById('close-modal');

  btnPanel.addEventListener('click', () => {
    modalPanel.style.transform = 'translateY(0)';
  });

  closeModal.addEventListener('click', () => {
    modalPanel.style.transform = 'translateY(100%)';
  });

  // برای اینکه با کلیک بیرون مودال هم بسته شود (اختیاری)
  window.addEventListener('click', (e) => {
    if (e.target === modalPanel) {
      modalPanel.style.transform = 'translateY(100%)';
    }
  });
</script>

     
<script>

  // انیمیشن کوچک شدن هدر روی اسکرول
  window.addEventListener("scroll", () => {
    const header = document.getElementById("main-header");
    if (window.scrollY > 50) {
      header.classList.add("shadow-2xl", "backdrop-blur-md", "bg-opacity-95", "py-3");
      header.classList.remove("py-5");
    } else {
      header.classList.remove("shadow-2xl", "backdrop-blur-md", "bg-opacity-95", "py-3");
      header.classList.add("py-5");
    }
  });




  // انیمیشن کوچک شدن هدر
  window.addEventListener("scroll", () => {
    const header = document.getElementById("main-header");
    if (window.scrollY > 50) {
      header.classList.add("shadow-2xl", "backdrop-blur-md", "bg-opacity-95", "py-3");
      header.classList.remove("py-5");
    } else {
      header.classList.remove("shadow-2xl", "backdrop-blur-md", "bg-opacity-95", "py-3");
      header.classList.add("py-5");
    }
  });


  

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register("{% static 'core/js/sw.js' %}")
      .then(() => console.log("Service Worker Registered"))
      .catch(error => console.error("Error registering Service Worker:", error));
  }
</script>
      
